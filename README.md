# Тестовое задание Veeam

## Задание
Требуется написать консольную программу на C# для генерации сигнатуры указанного файла. Сигнатура генерируется следующим образом: исходный файл делится на блоки заданной длины (кроме последнего блока), для каждого блока вычисляется значение hash-функции SHA256, и вместе с его номером выводится в консоль.

Программа должна уметь обрабатывать файлы, размер которых превышает объем оперативной памяти, и при этом максимально эффективно использовать вычислительные мощности многопроцессорной системы. При работе с потоками допускается использовать только стандартные классы и библиотеки из .Net (исключая ThreadPool, BackgroundWorker, TPL).

Ожидается реализация с использованием Thread-ов. Путь до входного файла и размер блока задаются в командной строке. В случае возникновения ошибки во время выполнения программы ее текст и StackTrace необходимо вывести в консоль.

## Запуск

### Из Visual Studio
Если программа увидит подключенный дебаггер или не найдет аргументов запуска, она попросит ввести путь до файла и размер блока

### Из командной строки
Аргументы:
  Что | Зачем 
--- | --- 
**--input-path** *path*  | Путь до входного файла
**--block-size** *size* | Размер блока в байтах
**--output-path** *path*  | *Необязателен.* Путь до файла с результатом расчета. Если не указан, вывод будет производиться в консоль
**--single-thread** | *Необязателен.* Если указан, программа будет выполняться в однопоточном режиме
**--hash-algorithm-name** *name* | *Необязателен.* Название алгоритма хэширования, по умолчанию - SHA256

## Бенчмарк
|           Method | InputFilePath | BlockSize |        Mean |     Error |    StdDev | Gen 0 | Gen 1 | Gen 2 | Allocated |
|----------------- |-------------- |---------- |------------:|----------:|----------:|------:|------:|------:|----------:|
| SingleThreadImpl |   C:\32mb.bin |   4194304 |   120.83 ms |  0.911 ms |  0.852 ms |     - |     - |     - |      4 MB |
|  MultiThreadImpl |   C:\32mb.bin |   4194304 |    33.38 ms |  0.443 ms |  0.414 ms |     - |     - |     - |     24 MB |
| SingleThreadImpl |    C:\1gb.bin |   4194304 | 3,783.39 ms | 15.564 ms | 14.558 ms |     - |     - |     - |      4 MB |
|  MultiThreadImpl |    C:\1gb.bin |   4194304 |   684.39 ms |  3.102 ms |  2.749 ms |     - |     - |     - |     24 MB |
| SingleThreadImpl |    C:\1gb.bin | 134217728 | 3,811.87 ms | 12.248 ms | 11.457 ms |     - |     - |     - |    128 MB |
|  MultiThreadImpl |    C:\1gb.bin | 134217728 | 1,062.83 ms |  3.379 ms |  2.996 ms |     - |     - |     - |    768 MB |
